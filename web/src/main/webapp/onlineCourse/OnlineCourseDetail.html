<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">


<link type="text/css"
	href="<%=request.getContextPath()%>/css/jihaoshi.css" rel="stylesheet">
<style>
#pageHead {
	width: 100%;
	height: 30%;
}

div.divflex2 {
	display: flex;
	position: absolute;
	top: 41%;
	left: 50%;
	translate: -42%;
	gap: 5rem;
	width: 86%;
	justify-content: center;
	background-color: #fffcec;
/* 	z-index: -999; */
	min-height: 200vh;
	padding-top: 20px;
	flex-wrap: wrap;
 	z-index: 2; 
 	margin-top: 24px;
}
</style>




</head>

<body bgcolor='white'>
	<img src="../images/JihaoshiPageHead.jpg" id="pageHead">

	<div id="WRAPPER">
		<div class="divflex">
			<div class=""
				style="text-align: center; background-color: #FFFAF0; widtH: 13%; height: 100vw; background-color: #F3E3C3; z-index: 1;">
				<!--側邊欄區塊開始-->
				<ul class="treeview" style="list-style-type: none;">
					<li id="cate_D" class="expanded">
						<H1>功能列表</H1>
						<ul class="main" style="list-style-type: none;">
							<li><a href="ListAllOnlineCourse.jsp">回線上課程瀏覽專區</a></li>
						</ul>
					</li>
				</ul>

			</div>
			<!--側邊欄區塊結束-->
			<div id="cardWrapper">
			
			</div>
		</div>
	</div>
	<script>
                const cardWrapper = document.querySelector('#cardWrapper');
                const id = sessionStorage.getItem('courseNo');
                const url = '../onlineCourse/detail?courseNo=' + id;
                fetch(url)
                    .then(resp => resp.json())
                    .then(onlineCourse => {
                    	const [course,comment]=onlineCourse;
                         cardWrapper.insertAdjacentHTML('beforeend', `
 							<div class="block divflex2">
 							<div class="photo">
 								<img style="border-radius:10px" src="data:image/png;base64,${course.onlineCoursePhotoBaseStr64}">
 							</div>
 							<div class="content">
	 							<div style="border: solid 5px #F2DFD5; padding:10px; border-radius:10px;height:50vh;margin-bottom:10px">
	 								<b>線上課程編號</b> :${course.courseNo}<br><br>
	 								<b>線上課程名稱</b> :${course.courseName}<br><br>
	 								<b>線上課程價格</b> :${course.coursePrice}<br><br>
	 								<b>線上課程時數</b> :${course.courseHr}<br><br>
	 								<b>線上課程老師</b> :${course.courseTeacher}<br><br>
	 								<b>線上課程資訊</b> :${course.courseInfo}<br><br>
	 								<b>線上課程評論人數</b> :${course.commentPeople}<br><br>
	 								<b>線上課程評論分數</b> :${course.commentScore}<br><br>
	 								
	 							</div>
	 							<div style="display:flex;gap:20px">
 								<form method="get" action="../cart/cartCourseController">
 								<input type="hidden" name="courseNo" value="${course.courseNo}">
                                <input type="hidden" name="action" value="cartAdd">
                                <input type="submit" value="加入購物車">
                            	</form>

                            	<form method="get" action="../cart/cartCourseController">
 								<input type="hidden" name="courseNo" value="${course.courseNo}">
                                <input type="hidden" name="action" value="oneCartAdd">
                                <input type="submit" value="直接結帳">
                            	</form>
								</div>
 							<div id="commentarea" style=""></div>					
 						</div>`)
 						getComment(comment)
 					});
                 // coursePhoto
                
                 function getComment(list){
                	const commentarea = document.querySelector('#commentarea');
                  	commentarea.innerHTML='評論專區<br>';
                  	if(list.length==0){
                  		commentarea.innerHTML='評論專區<br>尚無評價';
                  	}
 					for(comment of list){
                         commentarea.insertAdjacentHTML('beforeend', `
 						<span>
                        	評論編號 :${comment.commentNo}
							帳號 : ${comment.memberNo}
							評語 : ${comment.commentContent}
							分數 : ${comment.commentScore}
						</span><br>
					`)}
                 }
                
            </script>
</body>

</html>