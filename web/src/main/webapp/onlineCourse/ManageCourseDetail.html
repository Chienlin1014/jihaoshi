<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://www.youtube.com/iframe_api"></script>
<title>Document</title>


<link type="text/css"
	href="../css/jihaoshi.css" rel="stylesheet">
<style>
#pageHead {
	width: 100%;
	height: 30%;
}

div.divflex2 {
	display: flex;
	position: absolute;
	top: 41%;
	left: 50%;
	translate: -50%;
	gap: 5rem;
	width: 100%;
	justify-content: center;
	background-color: #fffcec;
	z-index: -999;
	min-height: 200vh;
	padding-top: 20px;
	flex-wrap: wrap;
}
</style>




</head>

<body bgcolor='white'>
	<img src="../images/JihaoshiPageHead.jpg" id="pageHead">
	<div id="player"></div>

	<div id="WRAPPER" class="">
		<div class="divflex">
			<div class=""
				style="text-align: center; background-color: #FFFAF0; widtH: 13%; height: 100vw; background-color: #F3E3C3; z-index: 999;">
				<!--側邊欄區塊開始-->
				<ul class="treeview" style="list-style-type: none;">
					<li id="cate_D" class="expanded">
						<H1>功能列表</H1>
						<ul class="main" style="list-style-type: none;">

							<li><a href="ManageCourse.jsp">回會員線上課程購買專區</a></li>
						</ul>
					</li>
				</ul>

			</div>
			<!--側邊欄區塊結束-->
			<div id="cardWrapper"></div>
			<script>
				function showDetail(courseNo) {
					sessionStorage.setItem('courseNo', courseNo);
					location = 'onlineCourseDetail.html';
				}

				var tag = document.createElement('script');
				tag.src = "https://www.youtube.com/iframe_api";
				var firstScriptTag = document.getElementsByTagName('script')[0];
				firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

				var player;
				function onYouTubeIframeAPIReady() {
					const cardWrapper = document.querySelector('#cardWrapper');
					const id = sessionStorage.getItem('courseNo');
					const url = `../onlineCourse/detail?courseNo=${id}`;
					fetch(url)
						.then(resp => resp.json())
						.then(body => {
							player = new YT.Player('player', {
								height: '390',
								width: '640',
								videoId: body[0].courseVideo,
								playerVars: {
									'playsinline': 1
								},
								events: {
									'onReady': onPlayerReady,
									'onStateChange': onPlayerStateChange
								}
							});

// 						<div class="block divflex2" onclick="showDetail(${onlineCourse.courseNo})">
// 							<div class="photo">
// 								<img style="border-radius:10px" src="data:image/png;base64,${onlineCourse.onlineCoursePhotoBaseStr64}">
// 							</div>

							courseVideo = body[0].courseVideo;
							cardWrapper.insertAdjacentHTML('beforeend', `
								<div class="block divflex2" onclick="showDetail(${body[0].courseNo})">
									<div class="content" style="position:absolute; left:55%;top:10%;border:1px solid black;border-radius:10px;padding:20px"> 
										<b>線上課程編號</b> :${body[0].courseNo}<br><br>
										線上課程名稱 :${body[0].courseName}<br><br>
										線上課程價格 :${body[0].coursePrice}<br><br>
										線上課程時數 :${body[0].courseHr}<br><br>
										線上課程老師 :${body[0].courseTeacher}<br><br>
										線上課程資訊 :${body[0].courseInfo}<br>
									</div>
								</div>`);
						});
				}

				function onPlayerReady(event) {
// 					event.target.playVideo();
				}

				var done = false;
				function onPlayerStateChange(event) {
					if (event.data == YT.PlayerState.PLAYING && !done) {
						setTimeout(stopVideo, 6000);
						done = true;
					}
				}
				function stopVideo() {
					player.stopVideo();
				}
			</script>
</body>

</html>